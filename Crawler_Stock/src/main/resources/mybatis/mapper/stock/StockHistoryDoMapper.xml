<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.yueshushu.learn.stock.mapper.StockHistoryDoMapper">
    <resultMap id="stockHistoryMap" type="top.yueshushu.learn.stock.domain.StockHistoryDo">
        <id property="id" column="id"></id>
        <result property="currDate" column="curr_date"></result>
        <result property="code" column="code"></result>
        <result property="name" column="name"></result>
        <result property="closingPrice" column="closing_price"></result>
        <result property="highestPrice" column="highest_price"></result>
        <result property="lowestPrice" column="lowest_price"></result>
        <result property="openingPrice" column="opening_price"></result>
        <result property="yesClosingPrice" column="yesClosing_price"></result>
        <result property="amplitude" column="amplitude"></result>
        <result property="amplitudeProportion" column="amplitude_proportion"></result>
        <result property="tradingVolume" column="trading_volume"></result>
        <result property="tradingValue" column="trading_value"></result>
        <result property="flag" column="flag"></result>
    </resultMap>
    <sql id="baseSql">
        id,curr_date,code,name,closing_price,highest_price,lowest_price,
        opening_price,yesClosing_price,amplitude,amplitude_proportion,
        trading_volume,trading_value,flag
    </sql>

    <delete id="deleteAsyncRangeDateData">
        delete from stock_history where code=#{code}
        and date_format(curr_date,'%Y%m%d') &gt;=date_format( #{startDate,jdbcType=TIMESTAMP},'%Y%m%d')
        and date_format(curr_date,'%Y%m%d') &lt;=date_format( #{endDate,jdbcType=TIMESTAMP},'%Y%m%d')
<!--        <![CDATA[ when t.curr_date >=#{startDate} and t.curr_date <=#{endDate} ]]>-->
    </delete>
</mapper>
